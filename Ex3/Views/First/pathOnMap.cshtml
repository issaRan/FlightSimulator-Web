
@{
    ViewBag.Title = "pathOnMap";
}
var IntervalTime = (1 / @Session["time"]) * 1000
    myTimer = (function () {
        $.post( "@Url.Action("getPosition")").done(function (xml) {
        var xmlDoc = $.parseXML( xml ),
        $xml = $( xmlDoc ),
        LatFromServer = $xml.find("Lat").text();
        LonFromServer = $xml.find("Lon").text();
        <script>
        canvas.setAttribute('width', window.innerWidth);
        canvas.setAttribute('height', window.innerHeight);
        var ctx = canvas.getContext("2d");
        ctx.beginPath();
        var Lon = (LonFromServer + 180 *(window.innerWidth/360));
        var Lat = (LatFromServer + 90 * (window.innerHeight / 180));
        ctx.arc(Lon, Lat, 6, 0, 2 * Math.PI);
        ctx.fillStyle = 'red';
        ctx.fill();
        ctx.stroke();
        </script>
        });
        });

        setInterval(myTimer, IntervalTime);
        myTimer();